#### 命名规范
表以t_为前缀；  
视图以v_为前缀；  
同义词以s_为前缀；  
簇表以c_为前缀；  
序列以seq_为前缀；  
存储过程以p_为前缀；  
函数以f_为前缀；  
包以pkg_为前缀；  
类以type_为前缀；  
外键以fk_为前缀；  
主键以pk_为前缀；  
唯一索引以ux_为前缀；  
普通索引以idx_为前缀；  
位图索引以bx_为前缀；  
函数索引以fx_为前缀  

#### TPC-H
1、官网下载最新的TPC-H的zip包

http://tpc.org/tpch/default.asp

2、解压配置与安装

解压后，进入dbgen目录

cp makefile.suite Makefile

vi Makefile

修改配置参数：
```
CC=gcc
DATABASE=ORACLE
MACHINE=LINUX
WORKLOAD=TPCH
```
编译
```
make
```
3、TPC-H数据生成  
```
./dbgen -s 100 -f  生成100G的数据，ll -h *.tbl可查看
./dbgen -vf -s 1  生成标准1G数据
./dbgen -s 0.01 -f 生成少量数据  
```
4、转csv数据  
```
for i in `ls *.tbl`; do sed 's/|$//' $i > ${i/tbl/csv}; done
```
将tbl文件转成csv格式并去掉行尾|分割符

转成.csv格式的文件在 ../dbgen目录下，可以通过ll -h *.csv查到
```
  24M  customer.csv
 719M  lineitem.csv
 2.2K  nation.csv
 163M  orders.csv
 23M   part.csv
113M   partsupp.csv
 384   region.csv
1.4M   supplier.csv

CREATE TABLE region (
          R_REGIONKEY       INTEGER         NOT NULL,
          R_NAME            CHAR(25)        NOT NULL,
          R_COMMENT         VARCHAR(152)
        ) ORGANIZATION LSC
ORDER BY (R_REGIONKEY);
      
CREATE TABLE nation (
          N_NATIONKEY       INTEGER         NOT NULL,
          N_NAME            CHAR(25)        NOT NULL,
          N_REGIONKEY       INTEGER         NOT NULL,
          N_COMMENT         VARCHAR(152)
        ) ORGANIZATION LSC
        ORDER BY (N_NATIONKEY);
CREATE TABLE supplier (
          S_SUPPKEY         INTEGER         NOT NULL,
          S_NAME            CHAR(25)        NOT NULL,
          S_ADDRESS         VARCHAR(40)     NOT NULL,
          S_NATIONKEY       INTEGER         NOT NULL,
          S_PHONE           CHAR(15)        NOT NULL,
          S_ACCTBAL         DECIMAL(15,2)   NOT NULL,
          S_COMMENT         VARCHAR(101)    NOT NULL
        ) ORGANIZATION LSC
ORDER BY (S_SUPPKEY)
PARTITION BY HASH(S_SUPPKEY) PARTITIONS 16;

CREATE TABLE part (
          P_PARTKEY         INTEGER         NOT NULL,
          P_NAME            VARCHAR(55)     NOT NULL,
          P_MFGR            CHAR(25)        NOT NULL ENCODING DICTIONARY(RLE),
          P_BRAND           CHAR(10)        NOT NULL ENCODING DICTIONARY(RLE),
          P_TYPE            VARCHAR(25)     NOT NULL ENCODING DICTIONARY(RLE),
          P_SIZE            INTEGER         NOT NULL,
          P_CONTAINER       CHAR(10)        NOT NULL ENCODING DICTIONARY(RLE),
          P_RETAILPRICE     DECIMAL(15,2)   NOT NULL,
          P_COMMENT         VARCHAR(23)     NOT NULL
        ) ORGANIZATION LSC
        ORDER BY (P_PARTKEY)
        PARTITION BY HASH(P_PARTKEY) PARTITIONS 16;

        CREATE TABLE partsupp (
          PS_PARTKEY        INTEGER         NOT NULL,
          PS_SUPPKEY        INTEGER         NOT NULL,
          PS_AVAILQTY       INTEGER         NOT NULL,
          PS_SUPPLYCOST     DECIMAL(15,2)   NOT NULL,
          PS_COMMENT        VARCHAR(199)    NOT NULL
        ) ORGANIZATION LSC
        ORDER BY (PS_SUPPKEY, PS_PARTKEY)
        PARTITION BY HASH(PS_PARTKEY) PARTITIONS 16;
        CREATE TABLE customer (
          C_CUSTKEY         INTEGER         NOT NULL,
          C_NAME            VARCHAR(25)     NOT NULL,
          C_ADDRESS         VARCHAR(40)     NOT NULL,
          C_NATIONKEY       INTEGER         NOT NULL,
          C_PHONE           CHAR(15)        NOT NULL,
          C_ACCTBAL         DECIMAL(15,2)   NOT NULL,
          C_MKTSEGMENT      CHAR(10)        NOT NULL ENCODING DICTIONARY(RLE),
          C_COMMENT         VARCHAR(117)    NOT NULL
        ) ORGANIZATION LSC
        ORDER BY (C_CUSTKEY)
        PARTITION BY HASH(C_CUSTKEY) PARTITIONS 16;

        CREATE TABLE orders (
          O_ORDERKEY        INTEGER          NOT NULL,
          O_CUSTKEY         INTEGER         NOT NULL,
          O_ORDERSTATUS     CHAR(1)         NOT NULL,
          O_TOTALPRICE      DECIMAL(15,2)   NOT NULL,
          O_ORDERDATE       DATE            NOT NULL,
          O_ORDERPRIORITY   CHAR(15)        NOT NULL ENCODING DICTIONARY(RLE),
          O_CLERK           CHAR(15)        NOT NULL ENCODING DICTIONARY(RLE),
          O_SHIPPRIORITY    INTEGER         NOT NULL,
          O_COMMENT         VARCHAR(79)     NOT NULL
        ) ORGANIZATION LSC
        ORDER BY(O_ORDERDATE, O_ORDERKEY)
        PARTITION BY HASH(O_ORDERKEY) PARTITIONS 16;
        CREATE TABLE lineitem (
          L_ORDERKEY       INTEGER          NOT NULL,
          L_PARTKEY         INTEGER         NOT NULL,
          L_SUPPKEY         INTEGER         NOT NULL,
          L_LINENUMBER      INTEGER         NOT NULL,
          L_QUANTITY        DECIMAL(15,2)   NOT NULL,
          L_EXTENDEDPRICE   DECIMAL(15,2)   NOT NULL,
          L_DISCOUNT        DECIMAL(15,2)   NOT NULL,
          L_TAX             DECIMAL(15,2)   NOT NULL,
          L_RETURNFLAG      CHAR(1)         NOT NULL,
          L_LINESTATUS      CHAR(1)         NOT NULL,
          L_SHIPDATE        DATE            NOT NULL,
          L_COMMITDATE      DATE            NOT NULL,
          L_RECEIPTDATE     DATE            NOT NULL,
          L_SHIPINSTRUCT    CHAR(25)        NOT NULL ENCODING DICTIONARY(RLE),
          L_SHIPMODE        CHAR(10)        NOT NULL ENCODING DICTIONARY(RLE),
          L_COMMENT         VARCHAR(44)     NOT NULL
        ) ORGANIZATION LSC
        ORDER BY(L_SHIPDATE, L_ORDERKEY)
        PARTITION BY HASH(L_ORDERKEY) PARTITIONS 16;
load data
        options(DEGREE_OF_PARALLELISM=2,TRIM=NOTRIM,ENABLE_BULK=TRUE,DECODER_THREAD_TIMES=1)
        infile 'region.csv' without embedded fields terminated by '|'
        append into table region(R_REGIONKEY, R_NAME, R_COMMENT);

        load data
        options(DEGREE_OF_PARALLELISM=2,TRIM=NOTRIM,ENABLE_BULK=TRUE,DECODER_THREAD_TIMES=1)
        infile 'nation.csv' without embedded fields terminated by '|'
        append into table nation(N_NATIONKEY, N_NAME, N_REGIONKEY, N_COMMENT);

        load data
        options(DEGREE_OF_PARALLELISM=2,TRIM=NOTRIM,ENABLE_BULK=TRUE,DECODER_THREAD_TIMES=1)
        infile 'supplier.csv' without embedded fields terminated by '|'
        append into table supplier(S_SUPPKEY, S_NAME, S_ADDRESS, S_NATIONKEY, S_PHONE, S_ACCTBAL, S_COMMENT);

        load data
        options(DEGREE_OF_PARALLELISM=2,TRIM=NOTRIM,ENABLE_BULK=TRUE,DECODER_THREAD_TIMES=1)
        infile 'part.csv' without embedded fields terminated by '|'
        append into table part(P_PARTKEY, P_NAME, P_MFGR, P_BRAND, P_TYPE, P_SIZE, P_CONTAINER, P_RETAILPRICE, P_COMMENT);

        load data
        options(DEGREE_OF_PARALLELISM=2,TRIM=NOTRIM,ENABLE_BULK=TRUE,DECODER_THREAD_TIMES=1)
        infile 'partsupp.csv' without embedded fields terminated by '|'
        append into table partsupp(PS_PARTKEY, PS_SUPPKEY, PS_AVAILQTY, PS_SUPPLYCOST, PS_COMMENT);

        load data
        options(DEGREE_OF_PARALLELISM=2,TRIM=NOTRIM,ENABLE_BULK=TRUE,DECODER_THREAD_TIMES=1)
        infile 'customer.csv' without embedded fields terminated by '|'
        append into table customer(C_CUSTKEY, C_NAME, C_ADDRESS, C_NATIONKEY, C_PHONE, C_ACCTBAL, C_MKTSEGMENT, C_COMMENT);

        load data
        options(DEGREE_OF_PARALLELISM=2,TRIM=NOTRIM,ENABLE_BULK=TRUE,DECODER_THREAD_TIMES=1)
        infile 'orders.csv' without embedded fields terminated by '|'
        append into table orders(O_ORDERKEY, O_CUSTKEY, O_ORDERSTATUS, O_TOTALPRICE, O_ORDERDATE, O_ORDERPRIORITY, O_CLERK, O_SHIPPRIORITY, O_COMMENT);
        load data
        options(DEGREE_OF_PARALLELISM=2,TRIM=NOTRIM,ENABLE_BULK=TRUE,DECODER_THREAD_TIMES=1)
        infile 'lineitem.csv' without embedded fields terminated by '|'
        append into table lineitem(L_ORDERKEY, L_PARTKEY, L_SUPPKEY, L_LINENUMBER, L_QUANTITY, L_EXTENDEDPRICE, L_DISCOUNT, L_TAX, L_RETURNFLAG, L_LINESTATUS, L_SHIPDATE, L_COMMITDATE, L_RECEIPTDATE, L_SHIPINSTRUCT, L_SHIPMODE, L_COMMENT
```

创建ctrl文件 eg:tpch_lineitem.ctl
```
LOAD DATA
INFILE '/data/tpch/lineitem.csv'
fields terminated by '|'  optionally enclosed by '"'
APPEND INTO TABLE LINEITEM
(
L_ORDERKEY,
L_PARTKEY,
L_SUPPKEY,
L_LINENUMBER,
L_QUANTITY,
L_EXTENDEDPRICE,
L_DISCOUNT,
L_TAX   ,
L_RETURNFLAG,
L_LINESTATUS,
L_SHIPDATE,
L_COMMITDATE,
L_RECEIPTDATE,
L_SHIPINSTRUCT,
L_SHIPMODE,
L_COMMENT
)
```

ORA - 错误码 完整版：https://docs.oracle.com/en/error-help/db/ora-index.html  

